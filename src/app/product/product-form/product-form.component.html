<div class="product-form-container">
  <h2>{{ isEditMode ? 'Edit Product' : 'Add New Product' }}</h2>
  <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
  
    <div class="form-group">
      <label for="reference">Reference :</label>
      <input type="text" id="reference" formControlName="reference" required class="form-control" />
      <div *ngIf="productForm.get('reference')?.invalid && productForm.get('reference')?.touched">
        Reference is required.
      </div>
    </div>

    <div class="form-group">
      <label for="name">Name :</label>
      <input type="text" id="name" formControlName="name" required class="form-control" />
      <div *ngIf="productForm.get('name')?.invalid && productForm.get('name')?.touched">
        Name is required.
      </div>
    </div>

    <div class="form-group">
      <label for="description">Description :</label>
      <input type="text" id="description" formControlName="description" required class="form-control" />
      <div *ngIf="productForm.get('description')?.invalid && productForm.get('description')?.touched">
        Description is required.
      </div>
    </div>

    <div class="form-group">
      <label for="availableQuantity">Available Quantity :</label>
      <input type="number" id="availableQuantity" formControlName="availableQuantity" required class="form-control" />
      <div *ngIf="productForm.get('availableQuantity')?.invalid && productForm.get('availableQuantity')?.touched">
        Available Quantity is required.
      </div>
    </div>

    <div class="form-group">
      <label for="price">Price :</label>
      <input type="number" id="price" formControlName="price" required class="form-control" />
      <div *ngIf="productForm.get('price')?.invalid && productForm.get('price')?.touched">
        Price is required.
      </div>
    </div>

    <div class="form-group">
      <label for="imageProduct">Image URL :</label>
      <input type="text" id="imageProduct" formControlName="imageProduct" class="form-control" />
    </div>

    <div class="form-group">
      <label for="category">Category:</label>
      <select id="category" formControlName="category" class="form-control">
        <option *ngFor="let category of categories" [ngValue]="category">
          {{ category.name }}
        </option>
      </select>
    </div>

    <div class="form-buttons">
      <button type="submit" class="btn btn-primary" [disabled]="productForm.invalid">
        {{ isEditMode ? 'Update' : 'Add' }}
      </button>
      <button type="button" class="btn btn-secondary" (click)="router.navigate(['/product/list'])"><i class="fas fa-times"></i> 
          Cancel
      </button>
      <button *ngIf="isEditMode" type="button" class="btn btn-danger" (click)="onDelete()"><i class="fas fa-trash"></i>
          Delete
      </button>
    </div>
  </form>

  <!-- Success message -->
  <div *ngIf="successMessage" class="alert alert-success mt-3">
    {{ successMessage }}
  </div>

  <!-- Back to Product List Button -->
  <button class="back-to-list-btn" (click)="router.navigate(['/product/list/admin'])">
    <i class="fas fa-arrow-left"></i> Back to Product List
  </button>
</div>
